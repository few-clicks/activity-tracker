# **State Management** 

## Содержание
- [State Manager](#state-management)
- [Store (Хранилище)](#storejs)
  - [constructor](#constructorreducers-isstorageconnected--true)
  - [getState](#getstate)
  - [dispatch](#dispatchaction)
  - [subscribe](#subscribelistener)
  - [_reduce](#_reducestate-action)
  - [Примеры использования](#примеры-использования-store)
- [Actions (Действия)](#actions-действия)
- [Reducers (Редьюсеры)](#reducers-редьюсеры)
    - [counterReducer](#counterreducer)
    - [inputReducer](#inputreducer)
    - [Примеры использования](#примеры-использования-reducers)


State Manager - это инструмент управления состоянием, обеспечивающий удобное и централизованное хранение данных, их изменение и обновление. 

`src/app/data` содержит все необходимые настройки для менеджера состояния, основанного на паттерне управления состоянием Redux.


## **Store (Хранилище)**
`store.js`  реализация класса Store, который представляет собой центральное звено state manager, обеспечивая хранение, обновление и уведомление компонентов о изменениях состояния приложения.

### constructor(reducers, isStorageConnected = true)

Инициализирует хранилище с заданными редьюсерами и подключается к localStorage, если `isStorageConnected` установлено в значение true.

- `reducers`: Объект, где ключи — это типы действий, а значения — функции редьюсеров.
- `isStorageConnected`: Необязательный булевый параметр для подключения состояния хранилища к localStorage. По умолчанию `true`.


### getState()

Возвращает текущее состояние хранилища.

- Возвращает: Текущий объект состояния.


### dispatch(action)

Отправляет действие в хранилище, вызывая обновления состояния и оповещая слушателей.

- `action`: Объект действия для отправки.
- Возвращает: Ничего.


### subscribe(listener)

Подписывает функцию-слушателя на хранилище, которая будет вызываться каждый раз при обновлении состояния (через метод dispatch).

- `listener`: Функция, которая будет вызываться при обновлениях состояния.
- Возвращает: Функцию для отмены подписки слушателя.

### _reduce(state, action)

Внутренний метод, используемый для применения действия к текущему состоянию с использованием редьюсеров.

- `state`: Текущее состояние хранилища.
- `action`: Объект действия для применения.
- Возвращает: Новый объект состояния после применения действия.

### Примеры использования store
Пример 1: Подписка на изменения в хранилище
```javascript
const render = () => {
  const state = store.getState();
  console.log(state.counter.count); // Выведет текущее значение счетчика
};

// Подписываемся на обновления состояния
const unsubscribe = store.subscribe(render);

// Позже можно отписаться от обновлений
// unsubscribe();
```
Пример 2: Отправка действий
```javascript
// Отправка действия увеличения счетчика
store.dispatch({ type: 'INCREMENT' });

// Отправка действия уменьшения счетчика
store.dispatch({ type: 'DECREMENT' });
```

## **Actions (Действия)**
`actions.js` содержит описание действий. <br> 
Actions (Действия) - это объекты, которые передают информацию из приложения в хранилище Redux. Действия являются единственным источником информации для хранилища и отправляются с использованием метода store.dispatch().
- INCREMENT: Указывает на действие, цель которого — увеличить значение счетчика.
- DECREMENT: Указывает на действие, цель которого — уменьшить значение счетчика.
- SET_TEXT: Указывает на действие, цель которого — установить новый текст.


## **Reducers (Редьюсеры)**

`reducers.js` содержит описание редьюсеров приложения, которые являются ключевыми элементами управления состоянием в Redux. <br>
Редьюсеры обрабатывают действия (actions) и обновляют состояние приложения (state) предсказуемым образом. <br>
- Принимают текущее состояние и действие, а затем возвращают новое состояние.
- Определяют, как изменяется состояние в ответ на каждое действие.

### counterReducer
Управляет состоянием счетчика.

- Параметры:
    - state: Объект состояния для счетчика, по умолчанию { value: 0 }.
    - action: Действие, отправленное в редьюсер.
- Действия:
    - INCREMENT: Увеличивает значение счетчика на 1.
    - DECREMENT: Уменьшает значение счетчика на 1.
- Возвращает: Новое состояние счетчика.

### inputReducer
Управляет состоянием текстового поля.

- Параметры:
    - state: Объект состояния для текстового поля, по умолчанию { text: 'world' }.
    - action: Действие, отправленное в редьюсер.
- Действия:
    - SET_TEXT: Устанавливает новый текст для состояния text.
- Возвращает: Новое состояние текстового поля.

## Примеры использования reducers:
Пример 1: Изменение счетчика:

```javascript
// Импорт редьюсеров и типов действий
import { counterReducer } from './reducers';
import { INCREMENT, DECREMENT } from './actions';

// Начальное состояние
const initialState = { value: 0 };

// Применение редьюсера для увеличения значения счетчика
const incrementedState = counterReducer(initialState, { type: INCREMENT });
console.log(incrementedState.value); // Выведет 1

// Применение редьюсера для уменьшения значения счетчика
const decrementedState = counterReducer(initialState, { type: DECREMENT });
console.log(decrementedState.value); // Выведет -1
```

Пример 2: Изменение текста:
```javascript
// Импорт редьюсеров и типов действий
import { inputReducer } from './reducers';
import { SET_TEXT } from './actions';

// Начальное состояние
const initialState = { text: 'world' };

// Применение редьюсера для изменения текста
const newState = inputReducer(initialState, { type: SET_TEXT, payload: { text: 'hello' } });
console.log(newState.text); // Выведет 'hello'
```